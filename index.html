<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Re-formatter</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
 
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Shepherd.js for tour -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/css/shepherd.css"/>
    <link rel="stylesheet" href="static/css/tour.css">
    <script src="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/js/shepherd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="static/js/tour.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div>
                    <h1><i class="fas fa-file-alt"></i> CV Re-formatter</h1>
                    <p>Upload and parse your existing CV or create a new professional resume from scratch</p>
                </div>
                <button id="startTour" class="btn-ghost" style="margin-left: 20px; white-space: nowrap;">
                    <i class="fas fa-question-circle"></i> Take a Tour
                </button>
            </div>
        </div>
        
        <div class="grid">
            <!-- LEFT FORM -->
            <div class="card">
                <div class="section-title">
                    <i class="fas fa-cog"></i>
                    <span>CV Settings</span>
                </div>

                <div class="tab-container">
                    <div class="tab-buttons">
                        <div class="tab-button active" data-tab="upload">
                            <i class="fas fa-upload"></i>
                            <span>Upload CV</span>
                        </div>
                        <div class="tab-button" data-tab="create">
                            <i class="fas fa-plus"></i>
                            <span>Create New</span>
                        </div>
                    </div>

                    <!-- Upload Tab -->
                    <div class="tab-content active" id="upload-tab">
                        <label>Upload your CV (PDF or DOCX)</label>
                        <div class="file-upload" id="fileUploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Click to browse or drag & drop your file</p>
                            <p class="file-name" id="fileName">No file selected</p>
                        </div>
                        <input id="fileInput" type="file" accept=".pdf,.docx" />
                        
                        <div class="button-group">
                            <button id="uploadBtn" class="small">
                                <i class="fas fa-paragraph"></i>
                                Parse CV
                            </button>
                            <button id="clearBtn" class="small btn-ghost">
                                <i class="fas fa-times"></i>
                                Clear
                            </button>
                        </div>
                    </div>

                    <!-- Create Tab -->
                    <div class="tab-content" id="create-tab">
                        <p style="color: var(--muted); margin-top: 0;">Start with a blank template and build your CV step by step.</p>
                    </div>
                </div>

                <div class="divider"></div>

                <label>Accent Color</label>
                <input type="color" id="accentColor" value="#7c3aed" />

                <label>Choose Template</label>
                <div class="template-list" id="templateList">
                    <div class="template-item active" data-template="a">
                        <i class="fas fa-file-lines"></i>
                        <div>Classic</div>
                    </div>
                    <div class="template-item" data-template="b">
                        <i class="fas fa-columns"></i>
                        <div>Two-Column</div>
                    </div>
                    <div class="template-item" data-template="c">
                        <i class="fas fa-minimize"></i>
                        <div>Minimal</div>
                    </div>
                    <div class="template-item" data-template="d">
                        <i class="fas fa-paint-brush"></i>
                        <div>Modern</div>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="section-title">
                    <i class="fas fa-user"></i>
                    <span>Personal Information</span>
                </div>

                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" placeholder="e.g. John Doe"/>
                </div>
                
                <div class="form-group">
                    <label for="title">Job Title</label>
                    <input type="text" id="title" placeholder="e.g. Senior Software Engineer"/>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" placeholder="e.g. john.doe@example.com"/>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" placeholder="e.g. +1 (555) 123-4567"/>
                </div>
                
                <div class="form-group">
                    <label for="github">GitHub URL</label>
                    <input type="url" id="github" placeholder="e.g. https://github.com/username"/>
                </div>
                
                <div class="form-group">
                    <label for="linkedin">LinkedIn URL</label>
                    <input type="url" id="linkedin" placeholder="e.g. https://linkedin.com/in/username"/>
                </div>

                <!-- Tab Interface for Different Sections -->
                <div class="tab-container">
                    <div class="tab-buttons">
                        <div class="tab-button active" data-tab="experience">
                            <i class="fas fa-briefcase"></i>
                            <span id="experienceTab_1">Experience</span>
                        </div>
                        <div class="tab-button" id="educationTab_1" data-tab="education">
                            <i class="fas fa-graduation-cap"></i>
                            <span>Education</span>
                        </div>
                        <div class="tab-button" id="skillstab_1" data-tab="skills">
                            <i class="fas fa-tools"></i>
                            <span>Skills</span>
                        </div>
                        <div class="tab-button" id="referencesTab_1" data-tab="references">
                            <i class="fas fa-user-friends"></i>
                            <span>References</span>
                        </div>
                        <div class="tab-button" id="customTab_1" data-tab="custom">
                            <i class="fas fa-plus-circle"></i>
                            <span>Additional</span>
                        </div>

                    </div>

                    <!-- Experience Tab -->
                    <div class="tab-content active" id="experience-tab">
                        <div id="experienceEntries">
                            <!-- Experience entries will be added here -->
                        </div>
                        <button class="small" id="addExperience">
                            <i class="fas fa-plus"></i>
                            Add Experience
                        </button>
                    </div>

                    <!-- Education Tab -->
                    <div class="tab-content" id="education-tab">
                        <div id="educationEntries">
                            <!-- Education entries will be added here -->
                        </div>
                        <button class="small" id="addEducation">
                            <i class="fas fa-plus"></i>
                            Add Education
                        </button>
                    </div>

                    <!-- Skills Tab -->
                    <div class="tab-content" id="skills-tab">
                        <div class="form-group">
                            <label for="skills">Technical Skills (comma separated)</label>
                            <input type="text" id="skills" placeholder="e.g. JavaScript, Python, React, Node.js"/>
                        </div>
                        
                        <div class="form-group">
                            <label for="softskills">Soft Skills (comma separated)</label>
                            <input type="text" id="softskills" placeholder="e.g. Communication, Teamwork, Problem-solving"/>
                        </div>
                        
                        <div class="form-group">
                            <label for="languages">Languages (comma separated)</label>
                            <input type="text" id="languages" placeholder="e.g. English, Spanish, French"/>
                        </div>
                    </div>

                    <!-- Custom Sections Tab -->
                    <div class="tab-content" id="custom-tab">
                        <div id="customEntries">
                            <!-- Custom section entries will be added here -->
                        </div>
                        <button class="small" id="addCustomSection">
                            <i class="fas fa-plus"></i>
                            Add Custom Section
                        </button>
                    </div>

                    <!-- References Tab -->
                    <div class="tab-content" id="references-tab">
                        <div id="referenceEntries">
                            <!-- Reference entries will be added here -->
                        </div>
                        <button class="small" id="addReference">
                            <i class="fas fa-plus"></i>
                            Add Reference
                        </button>
                    </div>
                </div>

                <div class="button-group">
                    <button id="previewBtn">
                        <i class="fas fa-eye"></i>
                        Update Preview
                    </button>
                    <button id="downloadBtn" class="btn-success">
                        <i class="fas fa-download"></i>
                        Download PDF
                    </button>
                    <button id="saveBtn" class="btn-ghost">
                        <i class="fas fa-save"></i>
                        Save as JSON
                    </button>
                </div>
            </div>

            <!-- RIGHT PREVIEW -->
            <div>
                <div class="card">
                    <div class="section-title">
                        <i class="fas fa-file-pdf"></i>
                        <span>Live Preview</span>
                    </div>
                    <div id="previewWrap">
                        <div id="previewArea"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div id="notificationMessage">Operation completed successfully</div>
    </div>

    <!-- Floating Donate Button -->
    <button class="donate-btn" id="openDonateModal" title="Support Us">
        <i class="fas fa-heart"></i>
        <span>Donate</span>
    </button>

    <!-- M-Pesa Donation Modal -->
    <div id="mpesaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-mobile-alt"></i> M-Pesa Donation</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="donationForm">
                    <div class="form-group">
                        <label for="phoneNumber">M-Pesa Phone Number</label>
                        <div class="input-with-prefix">
                            <span class="prefix">+254</span>
                            <input type="tel" id="phoneNumber" placeholder="7XXXXXXXX" pattern="[0-9]{9}" required>
                        </div>
                        <small class="hint">Enter your M-Pesa registered number without the leading 0</small>
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount (KES)</label>
                        <div class="input-with-prefix">
                            <span class="prefix">KES</span>
                            <input type="number" id="amount" min="1" value="100" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary" id="stkPushBtn">
                        <i class="fas fa-paper-plane"></i> Send STK Push
                    </button>
                </form>
                <div id="donationStatus" class="status-message"></div>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
    <script src="tour.js"></script>
</body>
</html>